System.register("chunks:///_virtual/LifeTrackItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(e){"use strict";var t,i,n,r,o,a,c,l,s,p,u,f,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Label,l=e.RichText,s=e.Node,p=e.UITransform,u=e.Size,f=e.Sprite,g=e.Component},function(e){h=e.GradeColor}],execute:function(){var d,b,y,m,z,T,L,v,w,S,x;o._RF.push({},"13c8150xT9OHoVDT5Oz5bA9","LifeTrackItem",void 0);var C=a.ccclass,D=a.property;e("LifeTrackItem",(d=C("LifeTrackItem"),b=D({type:c}),y=D({type:l}),m=D({type:s}),z=D({type:s}),d((v=t((L=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"agaLabel",v,r(t)),n(r(t),"descriptionText",w,r(t)),n(r(t),"descriptionBG",S,r(t)),n(r(t),"lineNode",x,r(t)),t}i(t,e);var o=t.prototype;return o.start=function(){},o.setData=function(e,t,i){this.agaLabel.string=e,this.descriptionText.string=t;var n=this.getHeight(),r=this.descriptionBG.getComponent(p),o=r.contentSize;r.contentSize=new u(o.width,n),this.descriptionBG.getComponent(f).color=h[i]},o.getHeight=function(){return this.descriptionText.getComponent(p).contentSize.height},o.setLineLength=function(e){var t=this.lineNode.getComponent(p),i=t.contentSize;t.contentSize=new u(i.width,e)},t}(g)).prototype,"agaLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(L.prototype,"descriptionText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(L.prototype,"descriptionBG",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(L.prototype,"lineNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=L))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/property.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){"use strict";var s,i,e,T,h,S,E,P,a,Y,r;return{setters:[function(t){s=t.classPrivateFieldSet,i=t.classPrivateFieldGet,e=t.createForOfIteratorHelperLoose,T=t.defineProperty},function(t){h=t.cclegacy,S=t.sys},function(t){E=t.sum,P=t.max,a=t.min,Y=t.clone,r=t.listRandom}],execute:function(){h._RF.push({},"146017WEUlI/LkSWRI1dalX","property",void 0);var c,n=new WeakMap,u=new WeakMap;t({Property:c=function(){function t(){T(this,"TYPES",{AGE:"AGE",CHR:"CHR",INT:"INT",STR:"STR",MNY:"MNY",SPR:"SPR",ESC:"ESC",LIF:"LIF",TLT:"TLT",EVT:"EVT",TMS:"TMS",LAGE:"LAGE",HAGE:"HAGE",LCHR:"LCHR",HCHR:"HCHR",LINT:"LINT",HINT:"HINT",LSTR:"LSTR",HSTR:"HSTR",LMNY:"LMNY",HMNY:"HMNY",LSPR:"LSPR",HSPR:"HSPR",SUM:"SUM",EXT:"EXT",ATLT:"ATLT",AEVT:"AEVT",ACHV:"ACHV",CTLT:"RTLT",CEVT:"REVT",CACHV:"CACHV",RDM:"RDM"}),T(this,"SPECIAL",{RDM:[this.TYPES.CHR,this.TYPES.INT,this.TYPES.STR,this.TYPES.MNY,this.TYPES.SPR]}),n.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:{}})}var h=t.prototype;return h.initial=function(t){var e=t.age;for(var T in s(this,n,new Map),e){var h,S,E=e[T].age,P=e[T],a=P.event,Y=P.talent;Array.isArray(a)||(a=(null===(h=a)||void 0===h?void 0:h.split(","))||[]),a=a.map((function(t){var s=(""+t).split("*").map((function(t){return Number(t)}));return 1==s.length&&s.push(1),s})),Array.isArray(Y)||(Y=(null===(S=Y)||void 0===S?void 0:S.split(","))||[]),Y=Y.map((function(t){return Number(t)})),i(this,n)[E]={event:a,talent:Y}}},h.restart=function(t){var i;for(var e in s(this,u,((i={})[this.TYPES.AGE]=-1,i[this.TYPES.CHR]=0,i[this.TYPES.INT]=0,i[this.TYPES.STR]=0,i[this.TYPES.MNY]=0,i[this.TYPES.SPR]=0,i[this.TYPES.ESC]=0,i[this.TYPES.LIF]=1,i[this.TYPES.TLT]=[],i[this.TYPES.EVT]=[],i[this.TYPES.LAGE]=1/0,i[this.TYPES.LCHR]=1/0,i[this.TYPES.LINT]=1/0,i[this.TYPES.LSTR]=1/0,i[this.TYPES.LSPR]=1/0,i[this.TYPES.LMNY]=1/0,i[this.TYPES.HAGE]=-1/0,i[this.TYPES.HCHR]=-1/0,i[this.TYPES.HINT]=-1/0,i[this.TYPES.HSTR]=-1/0,i[this.TYPES.HMNY]=-1/0,i[this.TYPES.HSPR]=-1/0,i)),t)this.change(e,t[e])},h.restartLastStep=function(){i(this,u)[this.TYPES.LAGE]=this.get(this.TYPES.AGE),i(this,u)[this.TYPES.LCHR]=this.get(this.TYPES.CHR),i(this,u)[this.TYPES.LINT]=this.get(this.TYPES.INT),i(this,u)[this.TYPES.LSTR]=this.get(this.TYPES.STR),i(this,u)[this.TYPES.LSPR]=this.get(this.TYPES.SPR),i(this,u)[this.TYPES.LMNY]=this.get(this.TYPES.MNY),i(this,u)[this.TYPES.HAGE]=this.get(this.TYPES.AGE),i(this,u)[this.TYPES.HCHR]=this.get(this.TYPES.CHR),i(this,u)[this.TYPES.HINT]=this.get(this.TYPES.INT),i(this,u)[this.TYPES.HSTR]=this.get(this.TYPES.STR),i(this,u)[this.TYPES.HMNY]=this.get(this.TYPES.MNY),i(this,u)[this.TYPES.HSPR]=this.get(this.TYPES.SPR)},h.get=function(t){switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.ESC:case this.TYPES.LIF:case this.TYPES.TLT:case this.TYPES.EVT:var s=i(this,u)[t];return Y(s);case this.TYPES.LAGE:case this.TYPES.LCHR:case this.TYPES.LINT:case this.TYPES.LSTR:case this.TYPES.LMNY:case this.TYPES.LSPR:return a(i(this,u)[t],this.get(this.fallback(t)));case this.TYPES.HAGE:case this.TYPES.HCHR:case this.TYPES.HINT:case this.TYPES.HSTR:case this.TYPES.HMNY:case this.TYPES.HSPR:return P(i(this,u)[t],this.get(this.fallback(t)));case this.TYPES.SUM:var e=this.get(this.TYPES.HAGE),T=this.get(this.TYPES.HCHR),h=this.get(this.TYPES.HINT),S=this.get(this.TYPES.HSTR),r=this.get(this.TYPES.HMNY),c=this.get(this.TYPES.HSPR);return Math.floor(2*E(T,h,S,r,c)+e/2);case this.TYPES.TMS:return this.lsget("restartTimes")||0;case this.TYPES.EXT:return this.lsget("inheritTalent")||0;case this.TYPES.ATLT:case this.TYPES.AEVT:case this.TYPES.ACHV:return this.lsget(t)||[];case this.TYPES.CTLT:case this.TYPES.CEVT:case this.TYPES.CACHV:return this.get(this.fallback(t)).length;default:return 0}},h.fallback=function(t){switch(t){case this.TYPES.LAGE:case this.TYPES.HAGE:return this.TYPES.AGE;case this.TYPES.LCHR:case this.TYPES.HCHR:return this.TYPES.CHR;case this.TYPES.LINT:case this.TYPES.HINT:return this.TYPES.INT;case this.TYPES.LSTR:case this.TYPES.HSTR:return this.TYPES.STR;case this.TYPES.LMNY:case this.TYPES.HMNY:return this.TYPES.MNY;case this.TYPES.LSPR:case this.TYPES.HSPR:return this.TYPES.SPR;case this.TYPES.CTLT:return this.TYPES.ATLT;case this.TYPES.CEVT:return this.TYPES.AEVT;case this.TYPES.CACHV:return this.TYPES.ACHV;default:return}},h.set=function(t,s){switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.ESC:case this.TYPES.LIF:case this.TYPES.TLT:case this.TYPES.EVT:return this.hl(t,i(this,u)[t]=Y(s)),void this.achieve(t,s);case this.TYPES.TMS:return void this.lsset("restartTimes",parseInt(s)||0);case this.TYPES.EXT:return void this.lsset("inheritTalent",parseInt(s));default:return}},h.getLastRecord=function(){var t;return Y(((t={})[this.TYPES.AGE]=this.get(this.TYPES.AGE),t[this.TYPES.CHR]=this.get(this.TYPES.CHR),t[this.TYPES.INT]=this.get(this.TYPES.INT),t[this.TYPES.STR]=this.get(this.TYPES.STR),t[this.TYPES.MNY]=this.get(this.TYPES.MNY),t[this.TYPES.SPR]=this.get(this.TYPES.SPR),t))},h.change=function(t,s){if(Array.isArray(s))for(var T,h=e(s);!(T=h()).done;){var S=T.value;this.change(t,Number(S))}else switch(t){case this.TYPES.AGE:case this.TYPES.CHR:case this.TYPES.INT:case this.TYPES.STR:case this.TYPES.MNY:case this.TYPES.SPR:case this.TYPES.ESC:case this.TYPES.LIF:return void this.hl(t,i(this,u)[t]+=Number(s));case this.TYPES.TLT:case this.TYPES.EVT:var E=i(this,u)[t];if(s<0){var P=E.indexOf(s);-1!=P&&E.splice(P,1)}return E.includes(s)||E.push(s),void this.achieve(t,s);case this.TYPES.TMS:return void this.set(t,this.get(t)+parseInt(s));default:return}},h.hookSpecial=function(t){switch(t){case this.TYPES.RDM:return r(this.SPECIAL.RDM);default:return t}},h.effect=function(t){for(var s in t)this.change(this.hookSpecial(s),Number(t[s]))},h.isEnd=function(){return this.get(this.TYPES.LIF)<1},h.ageNext=function(){this.change(this.TYPES.AGE,1);var t=this.get(this.TYPES.AGE),s=this.getAgeData(t);return{age:t,event:s.event,talent:s.talent}},h.getAgeData=function(t){return Y(i(this,n)[t])},h.hl=function(t,s){var e;switch(t){case this.TYPES.AGE:e=[this.TYPES.LAGE,this.TYPES.HAGE];break;case this.TYPES.CHR:e=[this.TYPES.LCHR,this.TYPES.HCHR];break;case this.TYPES.INT:e=[this.TYPES.LINT,this.TYPES.HINT];break;case this.TYPES.STR:e=[this.TYPES.LSTR,this.TYPES.HSTR];break;case this.TYPES.MNY:e=[this.TYPES.LMNY,this.TYPES.HMNY];break;case this.TYPES.SPR:e=[this.TYPES.LSPR,this.TYPES.HSPR];break;default:return}var T=e,h=T[0],S=T[1];i(this,u)[h]=a(i(this,u)[h],s),i(this,u)[S]=P(i(this,u)[S],s)},h.achieve=function(t,s){var i;switch(t){case this.TYPES.ACHV:var e=this.lsget(t);return void this.lsset(t,(e||[]).concat([[s,Date.now()]]));case this.TYPES.TLT:i=this.TYPES.ATLT;break;case this.TYPES.EVT:i=this.TYPES.AEVT;break;default:return}var T=this.lsget(i)||[];this.lsset(i,Array.from(new Set(T.concat(s||[]).flat())))},h.lsget=function(t){var s=S.localStorage.getItem(t);if(null!=s&&"undefined"!=s)return JSON.parse(s)},h.lsset=function(t,s){S.localStorage.setItem(t,JSON.stringify(s))},t}(),default:c});h._RF.pop()}}}));

System.register("chunks:///_virtual/SummaryPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Talent.ts","./EventMessage.ts","./Life.ts","./TalentItem.ts","./PropItem.ts","./UIPanel.ts"],(function(e){"use strict";var t,r,i,n,a,l,o,s,p,c,u,m,h,b,f,d,g,y,I,T,_,P,v,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.defineProperty},function(e){l=e.cclegacy,o=e._decorator,s=e.Node,p=e.Prefab,c=e.Button,u=e.Label,m=e.instantiate,h=e.UITransform,b=e.Vec3},function(e){f=e.CalStage,d=e.GradeColor,g=e.PropNameMap,y=e.Message},function(e){I=e.talentMgr},function(e){T=e.eventMsg},function(e){_=e.lifeMgr},function(e){P=e.TalentItem},function(e){v=e.PropItem},function(e){L=e.UIPanel}],execute:function(){var S,M,E,w,C,z,D,G,R,x,N,Y,H,B,k,A,U,O,V,F,X,j,W;l._RF.push({},"1f26bOWTsVLxaooa+ZdgSIB","SummaryPanel",void 0);var Z=o.ccclass,q=o.property,J=["CHR","INT","STR","MNY","SPR"],K=[{value:10,des:"啊。这。。。"},{value:20,des:"平平凡凡"},{value:40,des:"平平安安"},{value:80,des:"在世仙人"},{value:160,des:"超神"}];e("SummaryPanel",(S=Z("SummaryPanel"),M=q({type:s}),E=q({type:p}),w=q({type:s}),C=q({type:p}),z=q({type:c}),D=q({type:u}),G=q({type:u}),R=q({type:u}),x=q({type:u}),N=q({type:u}),S((B=t((H=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(n(t),"talentItemGroup",B,n(t)),i(n(t),"talentItemPrfb",k,n(t)),i(n(t),"propGroup",A,n(t)),i(n(t),"propItemPrfb",U,n(t)),i(n(t),"RestartButton",O,n(t)),i(n(t),"ageLabel",V,n(t)),i(n(t),"resetTimesLabel",F,n(t)),i(n(t),"scoreLabel",X,n(t)),i(n(t),"scoreDesLabel",j,n(t)),i(n(t),"tipsLabel",W,n(t)),a(n(t),"talentItems",[]),a(n(t),"selectedTalentIndices",[]),a(n(t),"_talentList",void 0),a(n(t),"_limitSelectedTalentNum",1),a(n(t),"_curMaxHeight",void 0),a(n(t),"_propItemsMap",new Map),t}r(t,e);var l=t.prototype;return l.start=function(){},l.init=function(){var e=this,t=_._property.get(_._property.TYPES.TLT);this._talentList=new Array(t.length);for(var r=0;r<t.length;r++){var i=t[r];this._talentList[r]=I.get(i)}this.talentItemGroup.removeAllChildren(),this.selectedTalentIndices=[],this.talentItems=[],this.tipsLabel.string="选"+this._limitSelectedTalentNum+"项天赋，可以保留到下一世";var n=_._property.get(_._property.TYPES.ESC);this.scoreLabel.string=n,this.ageLabel.string="享年"+_._property.get(_._property.TYPES.AGE)+"岁",this.resetTimesLabel.string="第"+_._property.get(_._property.TYPES.TMS)+"世代";var a=f(K,n);this.scoreDesLabel.string=K[a].des,this.scoreDesLabel.color=d[a],this._contentUITrans=this.talentItemGroup._uiProps.uiTransformComp,this._curMaxHeight=0,this._talentList.forEach((function(t,r){var i=m(e.talentItemPrfb);i.setParent(e.talentItemGroup);var n=i.getComponent(P);n.index=r,n.setData(t),e.talentItems.push(n),n.onItemClick=e.onTalentItemClicked.bind(e);var a=i.getComponent(h).contentSize.height;i.setPosition(new b(0,e._curMaxHeight-a/2,0)),e._curMaxHeight-=a,e._contentUITrans.height=-e._curMaxHeight})),this.initProp()},l.createPropItem=function(e,t){var r=m(this.propItemPrfb);r.setParent(this.propGroup);var i=r.getComponent(v);return i.setData(e,t),i},l.initProp=function(){var e=this;this.propGroup.removeAllChildren(),this._propItemsMap.clear();var t=_.getLastRecord();J.forEach((function(r){e._propItemsMap.set(r,e.createPropItem(g[r],t[r]))}))},l.updatePropData=function(){var e=this,t=_.getLastRecord();J.forEach((function(r){var i=e._propItemsMap.get(r);null==i||i.updateValue(t[r])})),this.scoreLabel.string=_._property.get(_._property.TYPES.ESC).toString()},l.onTalentItemClicked=function(e){var t=this,r=this.selectedTalentIndices.indexOf(e);r>=0?this.selectedTalentIndices.splice(r,1):(this.selectedTalentIndices.length===this._limitSelectedTalentNum&&this.selectedTalentIndices.splice(this._limitSelectedTalentNum-1,1),this.selectedTalentIndices.push(e)),this.talentItems.forEach((function(e,r){t.selectedTalentIndices.indexOf(r)>=0?e.setSelected(!0):e.setSelected(!1)}))},l.onRestartButtonClicked=function(){this.selectedTalentIndices.length>0?_._property.set(_._property.TYPES.EXT,this._talentList[this.selectedTalentIndices[0]].id):_._property.set(_._property.TYPES.EXT,0),T.emit(y.Replay)},l.onShow=function(){this.init()},t}(L)).prototype,"talentItemGroup",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(H.prototype,"talentItemPrfb",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(H.prototype,"propGroup",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(H.prototype,"propItemPrfb",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(H.prototype,"RestartButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(H.prototype,"ageLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(H.prototype,"resetTimesLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(H.prototype,"scoreLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(H.prototype,"scoreDesLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(H.prototype,"tipsLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=H))||Y));l._RF.pop()}}}));

System.register("chunks:///_virtual/Life.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./util.ts","./property.ts","./event.ts","./Talent.ts","./achievement.ts","./ConfigManager.ts"],(function(t){"use strict";var e,r,i,n,o,s,p,a,h,c,_;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,r=t.createClass,i=t.defineProperty,n=t.asyncToGenerator},function(t){o=t.cclegacy},function(t){s=t.weightRandom},function(t){p=t.Property},function(t){a=t.default},function(t){h=t.talentMgr},function(t){c=t.Achievement},function(t){_=t.default}],execute:function(){o._RF.push({},"26af1qQIDFA4rL7IzI7FUF7","Life",void 0);t("lifeMgr",new(function(){function t(){i(this,"_property",void 0),i(this,"_event",void 0),i(this,"_talent",void 0),i(this,"_achievement",void 0),i(this,"_triggerTalents",void 0),this._property=new p,this._event=new a,this._talent=h,this._achievement=new c}var o=t.prototype;return o.initial=function(){var t=n(regeneratorRuntime.mark((function t(){var e,r,i,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([_.readJson("age"),_.readJson("talents"),_.readJson("events"),_.readJson("achievement")]);case 2:e=t.sent,r=e[0],i=e[1],n=e[2],o=e[3],this._property.initial({age:r}),this._talent.initial({talents:i}),this._event.initial({events:n}),this._achievement.initial({achievements:o});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.restart=function(t){this._triggerTalents={};var e=this.talentReplace(t.TLT);return this._property.restart(t),this.doTalent(),this._property.restartLastStep(),this._achievement.achieve(this._achievement.Opportunity.START,this._property),e},o.getTalentAllocationAddition=function(t){return this._talent.allocationAddition(t)},o.getTalentCurrentTriggerCount=function(t){return this._triggerTalents[t]||0},o.next=function(){var t=this._property.ageNext(),e=t.age,r=t.event,i=t.talent,n=this.doTalent(i),o=this.doEvent(this.random(r)),s=this._property.isEnd(),p=[].concat(n,o);return this._achievement.achieve(this._achievement.Opportunity.TRAJECTORY,this._property),{age:e,content:p,isEnd:s}},o.talentReplace=function(t){var e=this._talent.replace(t),r=[];for(var i in e){t.push(e[i]);var n=this._talent.get(i),o=this._talent.get(e[i]);r.push({type:"talentReplace",source:n,target:o})}return r},o.doTalent=function(t){var r=this;t&&this._property.change(this._property.TYPES.TLT,t),t=this._property.get(this._property.TYPES.TLT).filter((function(t){return r.getTalentCurrentTriggerCount(t)<r._talent.get(t).max_triggers}));for(var i,n=[],o=e(t);!(i=o()).done;){var s=i.value,p=this._talent.do(s,this._property);if(p){this._triggerTalents[s]=this.getTalentCurrentTriggerCount(s)+1;var a=p.effect,h=p.name,c=p.description,_=p.grade;n.push({type:this._property.TYPES.TLT,name:h,grade:_,description:c}),a&&this._property.effect(a)}}return n},o.doEvent=function(t){var e=this._event.do(t,this._property),r=e.effect,i=e.next,n=e.description,o=e.postEvent,s=e.grade,p=e.score;this._property.change(this._property.TYPES.EVT,t),this._property.effect({ESC:p}),this._property.effect(r);var a={type:this._property.TYPES.EVT,description:n,postEvent:o,grade:s};return i?[a].concat(this.doEvent(i)):[a]},o.random=function(t){var e=this;return s(t.filter((function(t){var r=t[0];return e._event.check(r,e._property)})))},o.talentRandom=function(t,e){void 0===t&&(t=10),void 0===e&&(e=!1);var r=this._property.get(this._property.TYPES.TMS),i=this._property.get(this._property.TYPES.CACHV);return this._talent.talentRandom(t,e,this.getLastExtendTalent(),{times:r,achievement:i})},o.talentExtend=function(t){this._property.set(this._property.TYPES.EXT,t)},o.getLastExtendTalent=function(){return this._property.get(this._property.TYPES.EXT)},o.getSummary=function(){return this._achievement.achieve(this._achievement.Opportunity.SUMMARY,this._property),{AGE:this._property.get(this._property.TYPES.HAGE),CHR:this._property.get(this._property.TYPES.HCHR),INT:this._property.get(this._property.TYPES.HINT),STR:this._property.get(this._property.TYPES.HSTR),MNY:this._property.get(this._property.TYPES.HMNY),SPR:this._property.get(this._property.TYPES.HSPR),SUM:this._property.get(this._property.TYPES.SUM)}},o.getLastRecord=function(){return this._property.getLastRecord()},o.exclusive=function(t,e){return this._talent.exclusive(t,e)},o.getAchievements=function(){return this._achievement.list(this._property).sort((function(t,e){var r=t.isAchieved,i=t.grade,n=t.hide,o=e.isAchieved,s=e.grade,p=e.hide;return r&&o?o-r:r||o?r?o?void 0:-1:1:n&&p?s-i:n?1:p?-1:s-i}))},o.getTotal=function(){var t=this._property.get(this._property.TYPES.TMS),e=this._property.get(this._property.TYPES.CACHV),r=this._property.get(this._property.TYPES.CTLT),i=this._property.get(this._property.TYPES.CEVT);return{times:t,achievement:e,talentRate:r/this._talent.count(),eventRate:i/this._event.count()}},r(t,[{key:"times",get:function(){var t;return(null===(t=this._property)||void 0===t?void 0:t.get(this._property.TYPES.TMS))||0},set:function(t){var e;null===(e=this._property)||void 0===e||e.set(this._property.TYPES.TMS,t),this._achievement.achieve(this._achievement.Opportunity.END,this._property)}}]),t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(e){"use strict";var t,i,r,n,l,o,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Sprite,c=e.Label,s=e.Component},function(e){u=e.GradeColor}],execute:function(){var p,b,h,f,d,g,v,y,m,L,w;l._RF.push({},"28655SvBVlOs7BuLbbcdG1I","AchievementItem",void 0);var A=o.ccclass,z=o.property;e("AchievementItem",(p=A("AchievementItem"),b=z({type:a}),h=z({type:c}),f=z({type:c}),d=z({type:a}),p((y=t((v=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,r(n(t),"BG",y,n(t)),r(n(t),"titleLbl",m,n(t)),r(n(t),"descLbl",L,n(t)),r(n(t),"flowerTag",w,n(t)),t}i(t,e);var l=t.prototype;return l.start=function(){},l.setData=function(e){e.hide&&!e.isAchieved?(this.titleLbl.string="???",this.descLbl.string="???"):(this.titleLbl.string=e.name,this.descLbl.string=e.description),this.BG.color=u[e.grade],e.isAchieved?this.flowerTag.node.active=!0:this.flowerTag.node.active=!1},t}(s)).prototype,"BG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(v.prototype,"titleLbl",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(v.prototype,"descLbl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(v.prototype,"flowerTag",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=v))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/achievement.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./util.ts","./condition.ts","./EventMessage.ts"],(function(e){"use strict";var t,i,n,r,c,o,u,s,a;return{setters:[function(e){t=e.classPrivateFieldSet,i=e.classPrivateFieldGet,n=e.createForOfIteratorHelperLoose,r=e.defineProperty},function(e){c=e.cclegacy},function(e){o=e.Message},function(e){u=e.clone},function(e){s=e.checkCondition},function(e){a=e.eventMsg}],execute:function(){c._RF.push({},"2ebf1c3o/JMO46jyizTZPPt","achievement",void 0);var v=new WeakMap;e("Achievement",function(){function e(){r(this,"Opportunity",{START:"START",TRAJECTORY:"TRAJECTORY",SUMMARY:"SUMMARY",END:"END"}),v.set(this,{writable:!0,value:void 0})}var c=e.prototype;return c.initial=function(e){var n=e.achievements;for(var r in t(this,v,new Map),n){var c=n[r];i(this,v)[c.id]=c}},c.count=function(){return Object.keys(i(this,v)).length},c.list=function(e){var t=this;return Object.values(i(this,v)).map((function(i){var n=i.id;return{id:n,name:i.name,opportunity:i.opportunity,description:i.description,hide:i.hide,grade:i.grade,isAchieved:t.isAchieved(n,e)}}))},c.get=function(e){var t=i(this,v)[e];if(!t)throw new Error("[ERROR] No Achievement["+e+"]");return u(t)},c.check=function(e,t){var i=this.get(e).condition;return s(t,i)},c.isAchieved=function(e,t){for(var i,r=n(t.get(t.TYPES.ACHV)||[]);!(i=r()).done;){if(i.value[0]==e)return!0}return!1},c.achieve=function(e,t){var i=this;this.list(t).filter((function(e){return!e.isAchieved})).filter((function(t){return t.opportunity==e})).filter((function(e){var n=e.id;return i.check(n,t)})).forEach((function(e){var n=e.id;t.achieve(t.TYPES.ACHV,n),a.emit(o.Achievement,i.get(n))}))},e}());c._RF.pop()}}}));

System.register("chunks:///_virtual/TagItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,a,n,r,o,c,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.Label,s=t.UIOpacity,p=t.Component}],execute:function(){var u,l,y,f,g,h,m;r._RF.push({},"30215PPV8RECbcWcSvYkUZZ","TagItem",void 0);var b=o.ccclass,v=o.property;t("TagItem",(u=b("TagItem"),l=v({type:c}),y=v({type:s}),u((h=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(n(e),"tagName",h,n(e)),a(n(e),"uiOpacity",m,n(e)),e}i(e,t);var r=e.prototype;return r.start=function(){},r.setFontSize=function(t){this.tagName.fontSize=t},r.setOpacity=function(t){this.uiOpacity.opacity=t},r.setTagName=function(t){this.tagName.string=t},r.refresh=function(t,e){var i=this.node.position,a=t/(t-i.z),n=(i.z+e)/(2*e);this.tagName.fontSize=15*a,this.uiOpacity.opacity=255*(n+.5)},e}(p)).prototype,"tagName",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(g.prototype,"uiOpacity",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/TalentItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(e){"use strict";var t,n,i,r,o,l,a,c,u,s,p,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,c=e.Label,u=e.Sprite,s=e.Button,p=e.Color,f=e.Component},function(e){m=e.GradeColor}],execute:function(){var y,b,d,h,I,g,v,C,L;l._RF.push({},"3512a8fVOxJgIUDJCjLwZRo","TalentItem",void 0);var B=a.ccclass,D=a.property;e("TalentItem",(y=B("TalentItem"),b=D({type:c}),d=D({type:u}),h=D({type:s}),y((v=t((g=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,i(r(t),"nameLbl",v,r(t)),i(r(t),"frame",C,r(t)),i(r(t),"ItemButton",L,r(t)),o(r(t),"index",0),o(r(t),"onItemClick",null),t}n(t,e);var l=t.prototype;return l.start=function(){},l.setData=function(e){this.nameLbl.string=e.name+"("+e.description+")",this.ItemButton.normalColor=m[e.grade]},l.onButtonClick=function(){var e;null===(e=this.onItemClick)||void 0===e||e.call(this,this.index)},l.setSelected=function(e){this.frame.color=e?p.GREEN:p.WHITE},t}(f)).prototype,"nameLbl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(g.prototype,"frame",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(g.prototype,"ItemButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=g))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/condition.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,n;return{setters:[function(r){e=r.createForOfIteratorHelperLoose},function(r){n=r.cclegacy}],execute:function(){function t(r,n){if(!Array.isArray(n))return function(r,n){var t=n.length,u=n.search(/[><\!\?=]/),s=n.substring(0,u),a=n.substring(u,u+="="==n[u+1]?2:1),i=n.substring(u,t),c=r.get(s),o="["==i[0]?JSON.parse(i):Number(i);switch(a){case">":return c>o;case"<":return c<o;case">=":return c>=o;case"<=":return c<=o;case"=":return Array.isArray(c)?c.includes(o):c==o;case"!=":return Array.isArray(c)?!c.includes(o):c==o;case"?":if(Array.isArray(c)){for(var f,l=e(c);!(f=l()).done;){var h=f.value;if(o.includes(h))return!0}return!1}return o.includes(c);case"!":if(Array.isArray(c)){for(var v,d=e(c);!(v=d()).done;){var g=v.value;if(o.includes(g))return!1}return!0}return!o.includes(c);default:return!1}}(r,n);if(0==n.length)return!0;if(1==n.length)return t(r,n[0]);for(var u=t(r,n[0]),s=1;s<n.length;s+=2)switch(n[s]){case"&":u&&(u=t(r,n[s+1]));break;case"|":if(u)return!0;u=t(r,n[s+1]);break;default:return!1}return u}r({checkCondition:function(r,e){var n=function(r){var e=[],n=r.length,t=[];t.unshift(e);for(var u=0,s=function(e){var n=r.substring(u,e).trim();u=e,n&&t[0].push(n)},a=0;a<n;a++)switch(r[a]){case" ":continue;case"(":s(a),u++;var i=[];t[0].push(i),t.unshift(i);break;case")":s(a),u++,t.shift();break;case"|":case"&":s(a),s(a+1);break;default:continue}return s(n),e}(e);return t(r,n)},extractMaxTriggers:function(r){var e=/AGE\?\[([0-9\,]+)\]/.exec(r);if(null==e)return 1;return e[1].split(",").length}}),n._RF.push({},"4613dzQqvlAubehIlfH/Drl","condition",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/EventMessage.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"4e324KiHd1Mj78n/Hffy+JF","EventMessage",void 0);var i=e("EventEmitter",function(){function e(){t(this,"_listenerMap",new Map)}var n=e.prototype;return n.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=this._listenerMap.get(e);r&&r.forEach((function(e){e.apply(void 0,n)}))},n.on=function(e,t){var n=this._listenerMap.get(e);n||(n=[],this._listenerMap.set(e,n)),n.push(t)},n.off=function(e,t){var n=this._listenerMap.get(e);if(n){var i=n.indexOf(t);i>=0&&n.splice(i,1)}},e}());e("eventMsg",new i);n._RF.pop()}}}));

System.register("chunks:///_virtual/LifeTrackPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./LifeTrackItem.ts","./EventMessage.ts","./Life.ts","./PropItem.ts","./UIPanel.ts"],(function(t){"use strict";var e,i,n,o,r,a,l,s,u,c,p,h,f,g,m,b,d,y,_,P,T,L,v,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty,a=t.createClass},function(t){l=t.cclegacy,s=t._decorator,u=t.Color,c=t.ScrollView,p=t.Node,h=t.Prefab,f=t.Button,g=t.Label,m=t.instantiate,b=t.Vec3,d=t.Animation},function(t){y=t.Message,_=t.PropNameMap},function(t){P=t.LifeTrackItem},function(t){T=t.eventMsg},function(t){L=t.lifeMgr},function(t){v=t.PropItem},function(t){B=t.UIPanel}],execute:function(){var S,I,k,C,w,N,A,M,E,x,z,H,G,J,O,D,R,V,Y,j,U,X,F,K,W,q,Q;l._RF.push({},"5aab2jXtf9OHJM7FC+9+iKf","LifeTrackPanel",void 0);var Z=s.ccclass,$=s.property,tt=["CHR","INT","STR","MNY","SPR"],et=new u(53,194,115);t("LifeTrackPanel",(S=Z("LifeTrackPanel"),I=$(c),k=$({type:p}),C=$({type:h}),w=$({type:p}),N=$({type:h}),A=$({type:p}),M=$({type:p}),E=$({type:p}),x=$({type:f}),z=$({type:g}),H=$({type:g}),G=$({type:p}),S((D=e((O=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"scrollView",D,o(e)),n(o(e),"lifeTrackGroup",R,o(e)),n(o(e),"lifeTrackItemPrfb",V,o(e)),n(o(e),"propGroup",Y,o(e)),n(o(e),"propItemPrfb",j,o(e)),n(o(e),"nextYearButtonNode",U,o(e)),n(o(e),"autoPlayButtonNode",X,o(e)),n(o(e),"restartButtonNode",F,o(e)),n(o(e),"changeSpeedButton",K,o(e)),n(o(e),"scoreLabel",W,o(e)),n(o(e),"lianJiLabel",q,o(e)),n(o(e),"lianJiNode",Q,o(e)),r(o(e),"_autoPlayButtonLbl",void 0),r(o(e),"_autoPlayButton",void 0),r(o(e),"_changeSpeedButtonLbl",void 0),r(o(e),"_isEnd",!1),r(o(e),"_isAutoPlay",!1),r(o(e),"_triggerTime",1e3),r(o(e),"_timeScale",1),r(o(e),"_timeScaleArray",[1,2,4,8,20]),r(o(e),"_curTimeScaleIndex",0),r(o(e),"_spacing",5),r(o(e),"_curMaxHeight",0),r(o(e),"_propItemsMap",new Map),r(o(e),"_combo",0),e}i(e,t);var l=e.prototype;return l.onLoad=function(){},l.start=function(){},l.initPanel=function(){this._contentUITrans=this.lifeTrackGroup._uiProps.uiTransformComp,this._autoPlayButtonLbl=this.autoPlayButtonNode.getComponentInChildren(g),this._autoPlayButton=this.autoPlayButtonNode.getComponent(f),this._changeSpeedButtonLbl=this.changeSpeedButton.getComponentInChildren(g)},l.createLifeTrack=function(t,e,i){var n=m(this.lifeTrackItemPrfb);n.setParent(this.lifeTrackGroup);var o=n.getComponent(P);o.setData(t,e,i);var r=o.getHeight();n.setPosition(new b(0,this._curMaxHeight,0)),o.setLineLength(r+this._spacing),this._curMaxHeight-=r+this._spacing,this._contentUITrans.height=-this._curMaxHeight},l.createPropItem=function(t,e){var i=m(this.propItemPrfb);i.setParent(this.propGroup);var n=i.getComponent(v);return n.setData(t,e),n},l.onReplayButtonClicked=function(){T.emit(y.LifeTrackEnd)},l.initProp=function(){var t=this;this.propGroup.removeAllChildren(),this._propItemsMap.clear();var e=L.getLastRecord();tt.forEach((function(i){t._propItemsMap.set(i,t.createPropItem(_[i],e[i]))}))},l.updatePropData=function(){var t=this,e=L.getLastRecord();tt.forEach((function(i){var n=t._propItemsMap.get(i);null==n||n.updateValue(e[i])})),this.scoreLabel.string=L._property.get(L._property.TYPES.ESC).toString()},l.playAnimation=function(){this.scoreLabel.getComponent(d).play("scorePop");var t=this.lianJiNode.getComponent(d);t.getState("lianJiPop");this._combo>2&&(this.lianJiLabel.string="X".concat(this._combo.toString()),t.play("lianJiPop"))},l.onShow=function(t,e){this._isEnd=!1,this._isAutoPlay=!1,this._curMaxHeight=0,this._combo=0,this.initPanel(),this.nextYearButtonNode.active=!0,this.autoPlayButtonNode.active=!0,this.restartButtonNode.active=!1,this.setAutoPlayButtonState(!1),this.lifeTrackGroup.removeAllChildren();var i={};Object.assign(i,e);var n=t.map((function(t){return t.id}));i.TLT=n;L.restart(i);this.initProp(),this.triggerOneLifeTrack()},l.onNextYearButtonClicked=function(){this.triggerOneLifeTrack()},l.onAutoPlayButtonClicked=function(){this._isAutoPlay?this._isAutoPlay=!1:(this._isAutoPlay=!0,this.triggerOneLifeTrack()),this.setAutoPlayButtonState(this._isAutoPlay)},l.setAutoPlayButtonState=function(t){t?(this._autoPlayButton.normalColor=et,this.changeSpeedButton.node.active=!0,this._changeSpeedButtonLbl.string="X"+this._timeScale):(this._autoPlayButton.normalColor=u.WHITE,this.changeSpeedButton.node.active=!1)},l.triggerOneLifeTrack=function(){var t=this;if(!this._isEnd){var e=L.next();this.showOneTrackItem(e),this.updatePropData(),this.playAnimation(),this.scrollView.scrollToBottom(.5),this._isEnd=e.isEnd,this._isEnd?this.onLifeEnd():this._isAutoPlay&&setTimeout((function(){t.triggerOneLifeTrack()}),this.realTriggerTime)}},l.setCombo=function(t){this._combo=t>10?10:t<0?0:t},l.showOneTrackItem=function(t){var e,i=this,n=t.content.map((function(t){var n=t.type,o=t.description,r=t.grade,a=t.name,l=t.postEvent;switch(n){case"TLT":return"天赋【"+a+"】发动："+o;case"EVT":return e=r,r>=1?i.setCombo(i._combo+1):i.setCombo(i._combo-1),o+(l?"<br/>"+l:"")}})).join("<br/>");this.createLifeTrack(t.age+"岁 ",n,e)},l.onLifeEnd=function(){this.nextYearButtonNode.active=!1,this.autoPlayButtonNode.active=!1,this.restartButtonNode.active=!0},l.onChangeSpeedButtonClicked=function(){this._curTimeScaleIndex=++this._curTimeScaleIndex%this._timeScaleArray.length,this._timeScale=this._timeScaleArray[this._curTimeScaleIndex],this._changeSpeedButtonLbl.string="X"+this._timeScale},a(e,[{key:"realTriggerTime",get:function(){return this._triggerTime/this._timeScale}}]),e}(B)).prototype,"scrollView",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(O.prototype,"lifeTrackGroup",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(O.prototype,"lifeTrackItemPrfb",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(O.prototype,"propGroup",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(O.prototype,"propItemPrfb",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(O.prototype,"nextYearButtonNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(O.prototype,"autoPlayButtonNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(O.prototype,"restartButtonNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(O.prototype,"changeSpeedButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(O.prototype,"scoreLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(O.prototype,"lianJiLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(O.prototype,"lianJiNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=O))||J));l._RF.pop()}}}));

System.register("chunks:///_virtual/Talent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./util.ts","./condition.ts"],(function(t){"use strict";var e,r,n,a,i,o,u,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,r=t.defineProperty},function(t){n=t.cclegacy},function(t){a=t.getRate},function(t){i=t.clone,o=t.weightRandom},function(t){u=t.extractMaxTriggers,c=t.checkCondition}],execute:function(){n._RF.push({},"6f0e92mPVdNDZxh7eJwr3t+","Talent",void 0);var s=t("TalentManager",function(){function t(){r(this,"_talents",void 0),r(this,"_talentGradeStruct",void 0)}t.SortTalent=function(t,e){var r=t.id,n=t.grade,a=e.id,i=e.grade-n;return 0!=i?i:r-a};var n=t.prototype;return n.initial=function(t){var r=t.talents;for(var n in this._talents=new Map,r){var a=r[n].id,i=r[n];if(this._talents[a]=i,i.id=Number(a),i.grade=Number(i.grade),i.max_triggers=u(i.condition),i.replacement)for(var o in i.replacement){for(var c,s={},l=e(i.replacement[o]);!(c=l()).done;){var f=c.value;s[(f=(""+f).split("*"))[0]||0]=Number(f[1])||1}i.replacement[o]=s}}var d={};for(var v in this._talents){var h=this._talents[v],g=h.id,p=h.grade,m=h.name,_=h.description;d[p]?d[p].push({grade:p,name:m,description:_,id:g}):d[p]=[{grade:p,name:m,description:_,id:g}]}this._talentGradeStruct=d},n.count=function(){return Object.keys(this._talents).length},n.check=function(t,e){var r=this.get(t).condition;return c(e,r)},n.get=function(t){var e=this._talents[t];if(!e)throw new Error("[ERROR] No Talent["+t+"]");return i(e)},n.information=function(t){var e=this.get(t);return{grade:e.grade,name:e.name,description:e.description}},n.exclusive=function(t,r){var n=this.get(r).exclusive;if(!n)return null;for(var a,i=e(t);!(a=i()).done;)for(var o,u=a.value,c=e(n);!(o=c()).done;){if(u==o.value)return u}return null},n.talentRandom=function(t,e,r,n){var o=void 0===n?{}:n,u=o.times,c=void 0===u?0:u,s=o.achievement,l=void 0===s?0:s,f={1:100,2:10,3:1},d={1:0,2:0,3:0},v=a("times",c),h=a("achievement",l);for(var g in v)d[g]+=v[g];for(var p in h)d[p]+=h[p];for(var m in d)f[m]*=1+d[m];var _=0;_=r?t-1:t;var x,y,M=new Array(_);e?(M[0]=3,x=1):x=0;for(var R=x;R<M.length;R++)M[R]=(y=void 0,y=Math.floor(1e3*Math.random()),(y-=f[3])<0?3:(y-=f[2])<0?2:(y-=f[1])<0?1:0);for(var b=i(this._talentGradeStruct),w=0;w<M.length;w++){for(var N=M[w];0==b[N].length;)N--;var T=b[N].length,A=Math.floor(Math.random()*T)%T,S=b[N].splice(A,1);M[w]=S[0]}return r&&M.splice(0,0,this._talents[r]),M},n.allocationAddition=function(t){if(Array.isArray(t)){for(var r,n=0,a=e(t);!(r=a()).done;){var i=r.value;n+=this.allocationAddition(i)}return n}return Number(this.get(t).status)||0},n.do=function(t,e){var r=this.get(t),n=r.effect,a=r.condition,i=r.grade,o=r.name,u=r.description;return a&&!c(e,a)?null:{effect:n,grade:i,name:o,description:u}},n.replace=function(t){for(var r,n=this,a=function t(e,r){var a=function(t,e){var r=n.get(t).replacement;if(!r)return null;var a=[];if(r.grade&&n.forEach((function(t){var i=t.id,o=t.grade;r.grade[o]&&(n.exclusive(e,i)||a.push([i,r.grade[o]]))})),r.talent)for(var i in r.talent){var o=Number(i);n.exclusive(e,o)||a.push([o,r.talent[o]])}return a}(e,r);if(!a)return e;var i=o(a);return t(i,r.concat(i))},u=i(t),c={},s=e(t);!(r=s()).done;){var l=r.value,f=a(l,u);f!=l&&(c[l]=f,u.push(f))}return c},n.forEach=function(t){if("function"==typeof t)for(var e in this._talents)t(i(this._talents[e]),e)},t}());t("talentMgr",new s);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventMessage.ts","./ConfigManager.ts","./Life.ts","./SummaryPanel.ts","./LifeTrackPanel.ts","./AchievementHint.ts","./AchievementPanel.ts","./DistributePropPanel.ts","./SelectTalentPanel.ts","./StartMenuPanel.ts"],(function(e){"use strict";var t,n,a,i,l,r,o,c,u,s,p,f,m,h,d,P,b,y,v,g,S,w,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,l=e.defineProperty,r=e.asyncToGenerator},function(e){o=e.cclegacy,c=e._decorator,u=e.Node,s=e.Button,p=e.sys,f=e.Component},function(e){m=e.Message},function(e){h=e.eventMsg},function(e){d=e.default},function(e){P=e.lifeMgr},function(e){b=e.SummaryPanel},function(e){y=e.LifeTrackPanel},function(e){v=e.AchievementHint},function(e){g=e.AchievementPanel},function(e){S=e.DistributePropPanel},function(e){w=e.SelectTalentPanel},function(e){T=e.StartMenuPanel}],execute:function(){var B,k,M,R,L,E,_,O,z,D,N,C,j,A,G,H,x,U,I,J,W,F,K;o._RF.push({},"6f8c8q9ZkpDqKjGhsV04tDD","GameManager",void 0);var q=c.ccclass,V=c.property;e("GameManager",(B=q("GameManager"),k=V({type:v}),M=V({type:u}),R=V({type:u}),L=V({type:s}),E=V({type:T}),_=V({type:g}),O=V({type:w}),z=V({type:S}),D=V({type:y}),N=V({type:b}),B((A=t((j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(i(t),"achievementHint",A,i(t)),a(i(t),"homeButtonNode",G,i(t)),a(i(t),"achievementButtonNode",H,i(t)),a(i(t),"clearButton",x,i(t)),a(i(t),"startMenuPanel",U,i(t)),a(i(t),"achievementPanel",I,i(t)),a(i(t),"selectTalentPanel",J,i(t)),a(i(t),"distributePropPanel",W,i(t)),a(i(t),"lifeTrackPanel",F,i(t)),a(i(t),"summaryPanel",K,i(t)),l(i(t),"_selectedTalentList",void 0),t}n(t,e);var o=t.prototype;return o.start=function(){this.init()},o.init=function(){var e=r(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([P.initial(),d.readJson("happy_life"),d.readJson("specialthanks")]);case 2:t=e.sent,n=t[1],t[2],h.on(m.StartMenu,(function(){a.startMenuPanel.show(n),a.selectTalentPanel.hide(),a.distributePropPanel.hide(),a.lifeTrackPanel.hide(),a.homeButtonNode.active=!1,a.achievementButtonNode.active=!0})),h.on(m.StartGame,(function(){a.startMenuPanel.hide(),a.homeButtonNode.active=!0,a.achievementButtonNode.active=!1,a.openSelectTalentPanel()})),h.on(m.TalentSelectEnd,(function(e){a._selectedTalentList=e,a.selectTalentPanel.hide(),a.distributePropPanel.show(e)})),h.on(m.DistributePropEnd,(function(e){a.distributePropPanel.hide(),a.lifeTrackPanel.show(a._selectedTalentList,e)})),h.on(m.LifeTrackEnd,(function(){a.lifeTrackPanel.hide(),a.summaryPanel.show()})),h.on(m.Replay,(function(){a.summaryPanel.hide(),P.times++,a.openSelectTalentPanel()})),h.on(m.Achievement,(function(e){a.achievementHint.show(e)})),h.emit(m.StartMenu);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.openSelectTalentPanel=function(){this.selectTalentPanel.show()},o.save=function(){if(p.platform===p.Platform.MOBILE_BROWSER||p.platform===p.Platform.DESKTOP_BROWSER){var e={};Object.keys(localStorage).filter((function(e){return"goog"!=e.substr(0,4)})).forEach((function(t){return e[t]=localStorage[t]}));var t=new Blob([JSON.stringify(e)],{type:"application/json"});t=(t.slice||t.webkitSlice||t.mozSlice).call(t,0,t.size,"application/octet-stream");var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.href=URL.createObjectURL(t),n.download="Remake_save_"+(new Date).toISOString().replace(":",".")+".json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}},o.load=function(){var e=this;if(p.platform===p.Platform.MOBILE_BROWSER||p.platform===p.Platform.DESKTOP_BROWSER){var t=document.createElement("input");t.type="file",t.name="file",t.accept="application/json",t.style="display: none;",t.append("body"),t.click(),t.addEventListener("change",(function(t){var n=t.target.files[0];if(n){var a=new FileReader;a.onload=function(){var t=JSON.parse(a.result);for(var n in t)localStorage[n]=t[n];e.achievementHint.show("加载存档成功")},a.readAsText(n)}}))}},o.onClearButtonClicked=function(){localStorage.clear()},o.onHomeButtonClicked=function(){h.emit(m.StartMenu)},o.onGithubButtonClicked=function(){p.openURL("https://github.com/gameall3d/LifeRestart_Cocos")},o.onOpenAchievementButtonClicked=function(){this.achievementPanel.show()},t}(f)).prototype,"achievementHint",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(j.prototype,"homeButtonNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(j.prototype,"achievementButtonNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(j.prototype,"clearButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(j.prototype,"startMenuPanel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(j.prototype,"achievementPanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(j.prototype,"selectTalentPanel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(j.prototype,"distributePropPanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(j.prototype,"lifeTrackPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(j.prototype,"summaryPanel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=j))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigManager.ts",["cc"],(function(n){"use strict";var e,o;return{setters:[function(n){e=n.cclegacy,o=n.resources}],execute:function(){e._RF.push({},"75637qSsT9DBJznyRJRalfo","ConfigManager",void 0);n("default",function(){function n(){}return n.readJson=function(n){return new Promise((function(e,r){o.load(n,(function(n,o){n?(console.error(n),r(n)):e(o.json)}))}))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/StatisticsItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(t){"use strict";var e,i,r,n,l,o,s,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,o=t._decorator,s=t.Sprite,a=t.Label,c=t.Component},function(t){u=t.GradeColor}],execute:function(){var p,b,f,y,h,g,d,m,L;l._RF.push({},"79c45lYN21I3Jzf9KxHQghc","StatisticsItem",void 0);var v=o.ccclass,z=o.property;t("StatisticsItem",(p=v("StatisticsItem"),b=z({type:s}),f=z({type:a}),y=z({type:a}),p((d=e((g=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l))||this,r(n(e),"BG",d,n(e)),r(n(e),"titleLbl",m,n(e)),r(n(e),"descLbl",L,n(e)),e}i(e,t);var l=e.prototype;return l.start=function(){},l.setData=function(t,e,i){this.titleLbl.string=t,this.descLbl.string=e,this.BG.color=u[i]},e}(c)).prototype,"BG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(g.prototype,"titleLbl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(g.prototype,"descLbl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=g))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Life.ts","./UIPanel.ts","./AchievementItem.ts","./StatisticsItem.ts"],(function(t){"use strict";var e,i,a,n,r,s,o,c,u,l,h,m,p,b,f,v,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,o=t._decorator,c=t.Node,u=t.Prefab,l=t.Button,h=t.instantiate},function(t){m=t.getGrade,p=t.getRate},function(t){b=t.lifeMgr},function(t){f=t.UIPanel},function(t){v=t.AchievementItem},function(t){I=t.StatisticsItem}],execute:function(){var g,y,d,_,B,P,A,G,S,w,L,R,z,D,T,C,k,U,j;s._RF.push({},"7baefjqdLRKUrgY5285bpeS","AchievementPanel",void 0);var M=o.ccclass,H=o.property;t("AchievementPanel",(g=M("AchievementPanel"),y=H({type:c}),d=H({type:u}),_=H({type:c}),B=H({type:u}),P=H({type:l}),A=H({type:l}),G=H({type:l}),S=H({type:l}),g((R=e((L=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,a(n(e),"achievementItemsGroup",R,n(e)),a(n(e),"achievementItemPrfb",z,n(e)),a(n(e),"statisticsItemsGroup",D,n(e)),a(n(e),"statisticsItemPrfb",T,n(e)),a(n(e),"tabButton0",C,n(e)),a(n(e),"tabButton1",k,n(e)),a(n(e),"tabButton2",U,n(e)),a(n(e),"tabButton3",j,n(e)),r(n(e),"_tabButtonList",void 0),r(n(e),"_itemHeight",100),r(n(e),"_spacingY",0),r(n(e),"_achievementList",void 0),e}i(e,t);var s=e.prototype;return s.start=function(){this._contentUITrans=this.achievementItemsGroup._uiProps.uiTransformComp},s.createAchievementItem=function(t){var e=h(this.achievementItemPrfb);e.setParent(this.achievementItemsGroup),e.getComponent(v).setData(t);var i=this.achievementItemsGroup.children.length;this._contentUITrans.height=i*this._itemHeight+this._spacingY*(i-1)},s.createStatisticsItem=function(t,e,i){var a=h(this.statisticsItemPrfb);a.setParent(this.statisticsItemsGroup),a.getComponent(I).setData(t,e,i)},s.initAchievementData=function(){this._achievementList=b.getAchievements()},s.onTabButtonClicked=function(t,e){var i=this;e=Number(e);for(var a=0;a<this._tabButtonList.length;a++){var n=this._tabButtonList[a];e!=a?n.interactable=!0:n.interactable=!1}this.achievementItemsGroup.removeAllChildren(),this._achievementList.filter((function(t){return t.grade==e})).forEach((function(t){var e=t.name,a=t.description,n=t.hide,r=t.grade,s=t.isAchieved;i.createAchievementItem({name:e,description:a,hide:n,grade:r,isAchieved:s})}))},s.onShow=function(){this._tabButtonList=[this.tabButton0,this.tabButton1,this.tabButton2,this.tabButton3],this._contentUITrans=this.achievementItemsGroup._uiProps.uiTransformComp,this.generateStatisticsData(),this.initAchievementData(),this.onTabButtonClicked(null,3)},s.generateStatisticsData=function(){this.statisticsItemsGroup.removeAllChildren();var t=b.getTotal(),e=t.times,i=t.achievement,a=t.talentRate,n=t.eventRate;this.createStatisticsItem("已重开"+e+"次",""+this.formatRate("times",e),m("times",e)),this.createStatisticsItem("成就达成"+i+"个",""+this.formatRate("achievement",i),m("achievement",i)),this.createStatisticsItem("事件收集率",Math.floor(100*n)+"%",m("eventRate",n)),this.createStatisticsItem("天赋收集率",Math.floor(100*a)+"%",m("talentRate",a))},s.formatRate=function(t,e){var i=p(t,e),a=Object.keys(i)[0];switch(parseInt(a)){case 0:a="白色";break;case 1:a="蓝色";break;case 2:a="紫色";break;case 3:a="橙色"}var n=Object.values(i)[0];return 0==n?"抽到"+a+"概率无变化":"抽到"+a+"概率提升"+100*n+"%"},e}(f)).prototype,"achievementItemsGroup",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(L.prototype,"achievementItemPrfb",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(L.prototype,"statisticsItemsGroup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(L.prototype,"statisticsItemPrfb",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(L.prototype,"tabButton0",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(L.prototype,"tabButton1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(L.prototype,"tabButton2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(L.prototype,"tabButton3",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=L))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/Defines.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.Color}],execute:function(){e({CalStage:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t<r.value)return n}return e.length},ConfigProp:void 0,getGrade:function(e,t){switch(e){case"times":case"achievement":return t>=100?3:t>=50?2:t>=10?1:0;case"talentRate":return t>=.9?3:t>=.6?2:t>=.3?1:0;case"eventRate":return t>=.6?3:t>=.4?2:t>=.2?1:0;default:return 0}},getRate:function(e,t){switch(e){case"times":return t>=100?{2:2.5}:t>=70?{2:2}:t>=50?{2:1.5}:t>=30?{2:1}:t>=10?{2:.5}:{2:0};case"achievement":return t>=100?{3:2.5}:t>=70?{3:2}:t>=50?{3:1.5}:t>=30?{3:1}:t>=10?{3:.5}:{3:0};default:return{}}}}),t._RF.push({},"85642Y205BHnpSvNRHQB1ax","Defines",void 0);var r;e("Message",{TalentSelectEnd:"TalentSelectEnd",DistributePropEnd:"DistributePropEnd",LifeTrackEnd:"LifeTrackEnd",Replay:"Replay",StartGame:"StartGame",Achievement:"Achievement",StartMenu:"StartMenu"});!function(e){e[e.CHR=0]="CHR",e[e.INT=1]="INT",e[e.STR=2]="STR",e[e.MNY=3]="MNY",e[e.SPR=4]="SPR"}(r||(r=e("ConfigProp",{})));e("PropNameMap",{CHR:"颜值",INT:"智力",STR:"体质",MNY:"家境",SPR:"快乐"}),e("GradeColor",[(new n).fromHEX("#464646"),(new n).fromHEX("#7ea5ec"),(new n).fromHEX("#e2a7ff"),(new n).fromHEX("#ffa07a"),(new n).fromHEX("#f77323"),(new n).fromHEX("#be2525"),(new n).fromHEX("#ffc600")]);t._RF.pop()}}}));

System.register("chunks:///_virtual/summary.ts",["cc"],(function(e){"use strict";var g;return{setters:[function(e){g=e.cclegacy}],execute:function(){e("summary",(function(e,g){var r=d[e].length;for(;r--;){var u=d[e][r],a=u.min,n=u.judge,i=u.grade;if(null==a||g>=a)return{judge:n,grade:i}}})),g._RF.push({},"8ea86yHpORGZ7iSw1xGvH8J","summary",void 0);var d={CHR:[{judge:"地狱",grade:0},{min:1,judge:"折磨",grade:0},{min:2,judge:"不佳",grade:0},{min:4,judge:"普通",grade:0},{min:7,judge:"优秀",grade:1},{min:9,judge:"罕见",grade:2},{min:11,judge:"逆天",grade:3}],MNY:[{judge:"地狱",grade:0},{min:1,judge:"折磨",grade:0},{min:2,judge:"不佳",grade:0},{min:4,judge:"普通",grade:0},{min:7,judge:"优秀",grade:1},{min:9,judge:"罕见",grade:2},{min:11,judge:"逆天",grade:3}],SPR:[{judge:"地狱",grade:0},{min:1,judge:"折磨",grade:0},{min:2,judge:"不幸",grade:0},{min:4,judge:"普通",grade:0},{min:7,judge:"幸福",grade:1},{min:9,judge:"极乐",grade:2},{min:11,judge:"天命",grade:3}],INT:[{judge:"地狱",grade:0},{min:1,judge:"折磨",grade:0},{min:2,judge:"不佳",grade:0},{min:4,judge:"普通",grade:0},{min:7,judge:"优秀",grade:1},{min:9,judge:"罕见",grade:2},{min:11,judge:"逆天",grade:3},{min:21,judge:"识海",grade:3},{min:131,judge:"元神",grade:3},{min:501,judge:"仙魂",grade:3}],STR:[{judge:"地狱",grade:0},{min:1,judge:"折磨",grade:0},{min:2,judge:"不佳",grade:0},{min:4,judge:"普通",grade:0},{min:7,judge:"优秀",grade:1},{min:9,judge:"罕见",grade:2},{min:11,judge:"逆天",grade:3},{min:21,judge:"凝气",grade:3},{min:101,judge:"筑基",grade:3},{min:401,judge:"金丹",grade:3},{min:1001,judge:"元婴",grade:3},{min:2001,judge:"仙体",grade:3}],AGE:[{judge:"胎死腹中",grade:0},{min:1,judge:"早夭",grade:0},{min:10,judge:"少年",grade:0},{min:18,judge:"盛年",grade:0},{min:40,judge:"中年",grade:0},{min:60,judge:"花甲",grade:1},{min:70,judge:"古稀",grade:1},{min:80,judge:"杖朝",grade:2},{min:90,judge:"南山",grade:2},{min:95,judge:"不老",grade:3},{min:100,judge:"修仙",grade:3},{min:500,judge:"仙寿",grade:3}],SUM:[{judge:"地狱",grade:0},{min:41,judge:"折磨",grade:0},{min:50,judge:"不佳",grade:0},{min:60,judge:"普通",grade:0},{min:80,judge:"优秀",grade:1},{min:100,judge:"罕见",grade:2},{min:110,judge:"逆天",grade:3},{min:120,judge:"传说",grade:3}]};g._RF.pop()}}}));

System.register("chunks:///_virtual/PropItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,o,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,u=e.Component}],execute:function(){var c,p,s,b,f,y,m;a._RF.push({},"928255UO/ZP+ZHuVTFkrvgo","PropItem",void 0);var v=o.ccclass,g=o.property;e("PropItem",(c=v("PropItem"),p=g({type:l}),s=g({type:l}),c((y=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(n(t),"nameLbl",y,n(t)),i(n(t),"valueLbl",m,n(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.setData=function(e,t){this.nameLbl.string=e,this.updateValue(t)},a.updateValue=function(e){this.valueLbl.string=e.toString()},t}(u)).prototype,"nameLbl",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(f.prototype,"valueLbl",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/DistributePropItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,l,s,u,c,a,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty,l=t.createClass},function(t){s=t.cclegacy,u=t._decorator,c=t.Label,a=t.EditBox,p=t.Component}],execute:function(){var d,f,h,b,y,v,B;s._RF.push({},"97386ft0aBMH5dxsVX1kPDt","DistributePropItem",void 0);var g=u.ccclass,k=u.property;t("DistributePropItem",(d=g("DistributePropItem"),f=k({type:c}),h=k({type:a}),d((v=i((y=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return i=t.call.apply(t,[this].concat(l))||this,n(o(i),"titleLbl",v,o(i)),n(o(i),"pointEditBox",B,o(i)),r(o(i),"onAddButtonClick",void 0),r(o(i),"onReduceButtonClick",void 0),r(o(i),"key",void 0),r(o(i),"_point",0),i}e(i,t);var s=i.prototype;return s.setTitle=function(t){this.titleLbl.string=t},s.start=function(){},s.onAddButtonClicked=function(){var t;null===(t=this.onAddButtonClick)||void 0===t||t.call(this,this)},s.onReduceButtonClicked=function(){var t;null===(t=this.onReduceButtonClick)||void 0===t||t.call(this,this)},l(i,[{key:"point",get:function(){return this._point},set:function(t){this._point=t,this.pointEditBox.string=this._point.toString()}}]),i}(p)).prototype,"titleLbl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(y.prototype,"pointEditBox",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementHint.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts"],(function(t){"use strict";var e,n,i,r,o,a,c,l,s,p,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.defineProperty},function(t){a=t.cclegacy,c=t._decorator,l=t.Label,s=t.Sprite,p=t.Animation,u=t.Component},function(t){h=t.GradeColor}],execute:function(){var f,m,v,y,g;a._RF.push({},"a7684CddlxIA6F0uCsqK1Kh","AchievementHint",void 0);var d=c.ccclass,b=c.property;t("AchievementHint",(f=d("AchievementHint"),m=b({type:l}),f((g=e((y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(r(e),"contentLbl",g,r(e)),o(r(e),"_isShowing",!1),o(r(e),"_timer",null),e}n(e,t);var a=e.prototype;return a.start=function(){},a.show=function(t,e){this.contentLbl.string=t.name,this.getComponent(s).color=h[t.grade];var n=this.getComponent(p);n.getState("lianJiPop");n.play("lianJiPop")},e}(u)).prototype,"contentLbl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/event.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./util.ts","./condition.ts"],(function(e){"use strict";var t,n,r,i,o,c;return{setters:[function(e){t=e.classPrivateFieldSet,n=e.classPrivateFieldGet,r=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){o=e.clone},function(e){c=e.checkCondition}],execute:function(){i._RF.push({},"b1ad8S5yrpNyLB2b+dSbwqq","event",void 0);var a=new WeakMap;e("default",function(){function e(){a.set(this,{writable:!0,value:void 0})}var i=e.prototype;return i.initial=function(e){var r=e.events;for(var i in t(this,a,new Map),r){var o=r[i].id,c=r[i];n(this,a)[o]=c,c.branch&&(c.branch=c.branch.map((function(e){return(e=e.split(":"))[1]=Number(e[1]),e})))}},i.count=function(){return Object.keys(n(this,a)).length},i.check=function(e,t){var n=this.get(e),r=n.include,i=n.exclude;return!n.NoRandom&&((!i||!c(t,i))&&(!r||c(t,r)))},i.get=function(e){var t=n(this,a)[e];if(!t)throw new Error("[ERROR] No Event["+e+"]");return o(t)},i.information=function(e){return{description:this.get(e).event}},i.do=function(e,t){var n=this.get(e),i=n.effect,o=n.branch,a=n.event,u=n.postEvent,s=n.grade,f=n.score;if(f||(f=1),s||(s=1),o)for(var v,l=r(o);!(v=l()).done;){var d=v.value,h=d[0],p=d[1];if(c(t,h))return{effect:i,next:p,description:a,grade:s,score:f}}return{effect:i,postEvent:u,description:a,grade:s,score:f}},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/DistributePropPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./EventMessage.ts","./Life.ts","./UIPanel.ts","./DistributePropItem.ts"],(function(t){"use strict";var i,e,o,n,r,s,a,u,p,l,c,f,P,d,b,h,m,I;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,a=t._decorator,u=t.Node,p=t.Prefab,l=t.Label,c=t.Button,f=t.instantiate},function(t){P=t.PropNameMap,d=t.Message},function(t){b=t.eventMsg},function(t){h=t.lifeMgr},function(t){m=t.UIPanel},function(t){I=t.DistributePropItem}],execute:function(){var g,y,M,v,L,k,B,A,D,C,R;s._RF.push({},"b4a3eoREDRPQZL9VkpDb8rf","DistributePropPanel",void 0);var w=a.ccclass,z=a.property,E=["CHR","INT","STR","MNY"];t("DistributePropPanel",(g=w("DistributePropPanel"),y=z({type:u}),M=z({type:p}),v=z({type:l}),L=z({type:c}),g((A=i((B=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,o(n(i),"propGroup",A,n(i)),o(n(i),"distributePropItemPrfb",D,n(i)),o(n(i),"totalPointsLbl",C,n(i)),o(n(i),"AddPropButton",R,n(i)),r(n(i),"totalPoints",20),r(n(i),"distributePropItemsMap",new Map),i}e(i,t);var s=i.prototype;return s.start=function(){},s.init=function(t){var i=this;this.AddPropButton.interactable=!0,this.propGroup.removeAllChildren(),this.distributePropItemsMap.clear(),E.forEach((function(t){i.distributePropItemsMap.set(t,i.createPropItem(t,P[t]))})),this.totalPoints+=h.getTalentAllocationAddition(t.map((function(t){return t.id}))),this.updateLeftPoints()},s.createPropItem=function(t,i){var e=f(this.distributePropItemPrfb);e.setParent(this.propGroup);var o=e.getComponent(I);return o.setTitle(i),o.key=t,o.point=0,o.onAddButtonClick=this.onItemAddButtonClick.bind(this),o.onReduceButtonClick=this.onItemReduceButtonClick.bind(this),o},s.getLeftPoints=function(){var t=Array.from(this.distributePropItemsMap.values()).reduce((function(t,i){return t+i.point}),0);return this.totalPoints-t},s.onItemAddButtonClick=function(t){this.getLeftPoints()>0&&(t.point+=1,this.updateLeftPoints())},s.onItemReduceButtonClick=function(t){t.point>0&&(t.point-=1,this.updateLeftPoints())},s.updateLeftPoints=function(){this.totalPointsLbl.string=this.getLeftPoints().toString()},s.onCheckButtonClicked=function(){var t=this,i={SPR:5};E.forEach((function(e){i[e]=t.distributePropItemsMap.get(e).point})),b.emit(d.DistributePropEnd,i)},s.onRandomDistributeButtonClicked=function(){for(var t=this,i=this.totalPoints,e=[10,10,10,10];i>0;)for(var o=Math.round(Math.random()*(Math.min(i,10)-1))+1;;){var n=Math.floor(4*Math.random())%4;if(!(e[n]-o<0)){e[n]-=o,i-=o;break}}Array.from(this.distributePropItemsMap.keys()).forEach((function(i,o){t.distributePropItemsMap.get(i).point=10-e[o]})),this.updateLeftPoints()},s.onAddPropButtonClicked=function(){this.totalPoints+=4,this.AddPropButton.interactable=!1,this.updateLeftPoints()},s.onShow=function(t){this.init(t)},i}(m)).prototype,"propGroup",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(B.prototype,"distributePropItemPrfb",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(B.prototype,"totalPointsLbl",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(B.prototype,"AddPropButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=B))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/SelectTalentPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Defines.ts","./Talent.ts","./EventMessage.ts","./Life.ts","./TalentItem.ts","./UIPanel.ts"],(function(t){"use strict";var e,n,i,l,a,s,r,o,c,u,h,d,p,f,b,m,T,g,I,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,l=t.assertThisInitialized,a=t.defineProperty},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,c=t.Prefab,u=t.Button,h=t.Label,d=t.instantiate,p=t.UITransform,f=t.Vec3},function(t){b=t.Message},function(t){m=t.TalentManager},function(t){T=t.eventMsg},function(t){g=t.lifeMgr},function(t){I=t.TalentItem},function(t){y=t.UIPanel}],execute:function(){var B,_,v,S,k,C,P,w,L,N,z,M,A,D,R,x,G,H,E,U,F,O,j,K,V;s._RF.push({},"c4d7b4gRL9Ga7bKz0sZBuMA","SelectTalentPanel",void 0);var Z=r.ccclass,q=r.property;t("SelectTalentPanel",(B=Z("SelectTalentPanel"),_=q({type:o}),v=q({type:o}),S=q({type:o}),k=q({type:c}),C=q({type:u}),P=q({type:u}),w=q({type:u}),L=q({type:u}),N=q({type:u}),z=q({type:h}),M=q({type:h}),B((R=e((D=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(l(e),"talentItemGroup",R,l(e)),i(l(e),"step1Node",x,l(e)),i(l(e),"step2Node",G,l(e)),i(l(e),"talentItemPrfb",H,l(e)),i(l(e),"checkButton",E,l(e)),i(l(e),"DrawButton",U,l(e)),i(l(e),"AdvDrawButton",F,l(e)),i(l(e),"AddChoiceButton",O,l(e)),i(l(e),"RefreshButton",j,l(e)),i(l(e),"checkButtonLbl",K,l(e)),i(l(e),"tips",V,l(e)),a(l(e),"talentItems",[]),a(l(e),"selectedTalentIndices",[]),a(l(e),"_talentList",void 0),a(l(e),"_limitSelectedTalentNum",3),a(l(e),"_curMaxHeight",void 0),e}n(e,t);var s=e.prototype;return s.start=function(){},s.init=function(){this.AddChoiceButton.interactable=!0,this.RefreshButton.interactable=!0,this.checkButton.interactable=!0,this._contentUITrans=this.talentItemGroup._uiProps.uiTransformComp,this._talentList=[],this.refreshPanel()},s.refreshPanel=function(){var t=this;this._talentList.length<=0?(this.step1Node.active=!0,this.step2Node.active=!1):(this.step1Node.active=!1,this.step2Node.active=!0,this.talentItems=[],this.selectedTalentIndices=[],this.talentItemGroup.removeAllChildren(),this._curMaxHeight=0,this._talentList.forEach((function(e,n){var i=d(t.talentItemPrfb);i.setParent(t.talentItemGroup);var l=i.getComponent(I);l.index=n,l.setData(e),t.talentItems.push(l),l.onItemClick=t.onTalentItemClicked.bind(t);var a=i.getComponent(p).contentSize.height;i.setPosition(new f(0,t._curMaxHeight-a/2,0)),t._curMaxHeight-=a,t._contentUITrans.height=-t._curMaxHeight})),this.updateTalentCheckState())},s.updateTalentCheckState=function(){if(this.tips.string="最多选择"+this._limitSelectedTalentNum+"个天赋",this.selectedTalentIndices.length===this._limitSelectedTalentNum)this.checkButtonLbl.string="完成",this.checkButton.interactable=!0;else{var t=this._limitSelectedTalentNum-this.selectedTalentIndices.length;this.checkButtonLbl.string="还差"+t+"个天赋",this.checkButton.interactable=!1}},s.onTalentItemClicked=function(t){var e=this,n=this.selectedTalentIndices.indexOf(t);n>=0?this.selectedTalentIndices.splice(n,1):(this.selectedTalentIndices.length===this._limitSelectedTalentNum&&this.selectedTalentIndices.splice(this._limitSelectedTalentNum-1,1),this.selectedTalentIndices.push(t)),this.talentItems.forEach((function(t,n){e.selectedTalentIndices.indexOf(n)>=0?t.setSelected(!0):t.setSelected(!1)})),this.updateTalentCheckState()},s.onCheckButtonClicked=function(){var t=this,e=[];this.selectedTalentIndices.forEach((function(n){e.push(t._talentList[n])})),T.emit(b.TalentSelectEnd,e)},s.onDrawButtonClicked=function(){this._talentList=g.talentRandom().sort(m.SortTalent),this.refreshPanel()},s.onAdvDrawButtonClicked=function(){this._talentList=g.talentRandom(40,!1).sort(m.SortTalent),this.refreshPanel()},s.onAddChoiceButtonClicked=function(){this._limitSelectedTalentNum+=2,this.AddChoiceButton.interactable=!1,this.updateTalentCheckState()},s.onRefreshButtonClicked=function(){this._talentList=g.talentRandom(this._talentList.length,!0).sort(m.SortTalent),this.RefreshButton.interactable=!1,this.refreshPanel()},s.onShow=function(){this.init()},e}(y)).prototype,"talentItemGroup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(D.prototype,"step1Node",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(D.prototype,"step2Node",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(D.prototype,"talentItemPrfb",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(D.prototype,"checkButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(D.prototype,"DrawButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(D.prototype,"AdvDrawButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(D.prototype,"AddChoiceButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(D.prototype,"RefreshButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(D.prototype,"checkButtonLbl",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(D.prototype,"tips",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=D))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,n;return{setters:[function(r){t=r.createForOfIteratorHelperLoose},function(r){n=r.cclegacy}],execute:function(){function e(){for(var r=0,t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.flat().forEach((function(t){return r+=t})),r}r({average:function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];var a=e.apply(void 0,t);return a/t.flat().length},clone:function r(t){switch(typeof t){case"object":if(Array.isArray(t))return t.map((function(t){return r(t)}));var n={};for(var e in t)n[e]=r(t[e]);return n;default:return t}},listRandom:function(r){return r[Math.floor(Math.random()*r.length)]},max:function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return Math.max.apply(Math,t.flat())},min:function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return Math.min.apply(Math,t.flat())},sum:e,weightRandom:function(r){for(var n,e=0,a=t(r);!(n=a()).done;){var o=n.value[1];e+=o}for(var u,f=Math.random()*e,i=t(r);!(u=i()).done;){var l=u.value,c=l[0],h=l[1];if((f-=h)<0)return c}return r[r.length-1]}}),n._RF.push({},"cbaaf06ZhFAdKhR7JtE1ykV","util",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/UIPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Component}],execute:function(){var c;e._RF.push({},"d4254NMR3hCDYP9uPC5N4jf","UIPanel",void 0);var r=o.ccclass;o.property,t("UIPanel",r("UIPanel")(c=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.show=function(){this.node.active=!0,this.onShow.apply(this,arguments)},o.onShow=function(){},o.hide=function(){this.node.active=!1},e}(i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/StartMenuPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventMessage.ts","./UIPanel.ts","./TagItem.ts"],(function(t){"use strict";var e,a,n,i,o,r,s,l,c,u,h,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.defineProperty},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,c=t.Node,u=t.instantiate},function(t){h=t.eventMsg},function(t){f=t.UIPanel},function(t){g=t.TagItem}],execute:function(){var p,d,M,P,_,m,v;r._RF.push({},"ff68dOP4v5KTacY3/xxvNmR","StartMenuPanel",void 0);var y=s.ccclass,I=s.property,b=200,C=Math.PI/180;t("StartMenuPanel",(p=y("StartMenuPanel"),d=I({type:l}),M=I({type:c}),p((m=e((_=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(i(e),"tagLabelPrfb",m,i(e)),n(i(e),"tagCloud",v,i(e)),o(i(e),"_tagItems",[]),o(i(e),"_angleX",0),o(i(e),"_angleY",0),o(i(e),"_isAutoRotY",!0),e}a(e,t);var r=e.prototype;return r.onStartButtonClicked=function(){h.emit("StartGame")},r.onShow=function(t){this.createTagCloud(t)},r.createTagCloud=function(t){this._tagItems=[],this.tagCloud.removeAllChildren();for(var e=t.length,a=0;a<e;a++){var n=(2*(a+1)-1)/e-1,i=Math.acos(n),o=i*Math.sqrt(e*Math.PI),r=b*Math.sin(i)*Math.cos(o),s=b*Math.sin(i)*Math.sin(o),l=b*Math.cos(i),c=u(this.tagLabelPrfb);c.setParent(this.tagCloud),c.setPosition(r,s,l);var h=c.getComponent(g);this._tagItems.push(h),h.setTagName(t[a]),h.refresh(400,b)}},r.rotateX=function(){var t=Math.cos(this._angleX),e=Math.sin(this._angleX);this._tagItems.forEach((function(a){var n=a.node.position,i=n.y*t-n.z*e,o=n.z*t+n.y*e;a.node.setPosition(n.x,i,o)}))},r.rotateY=function(){var t=Math.cos(this._angleY),e=Math.sin(this._angleY);this._tagItems.forEach((function(a){var n=a.node.position,i=n.x*t-n.z*e,o=n.z*t+n.x*e;a.node.setPosition(i,n.y,o)}))},r.rotateItems=function(){this.rotateX(),this.rotateY(),this._tagItems.forEach((function(t){t.refresh(400,b)}))},r.update=function(t){this._isAutoRotY&&(this._angleY=t*C*5,this.rotateItems())},e}(f)).prototype,"tagLabelPrfb",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(_.prototype,"tagCloud",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=_))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Defines.ts","./LifeTrackItem.ts","./util.ts","./property.ts","./condition.ts","./event.ts","./Talent.ts","./EventMessage.ts","./achievement.ts","./ConfigManager.ts","./Life.ts","./TalentItem.ts","./PropItem.ts","./UIPanel.ts","./SummaryPanel.ts","./AchievementItem.ts","./TagItem.ts","./LifeTrackPanel.ts","./AchievementHint.ts","./StatisticsItem.ts","./AchievementPanel.ts","./DistributePropItem.ts","./DistributePropPanel.ts","./SelectTalentPanel.ts","./StartMenuPanel.ts","./GameManager.ts","./summary.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});